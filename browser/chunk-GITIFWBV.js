import{a as _,b as D}from"./chunk-FW73W5FM.js";import{Aa as y,Ca as S,D as r,J as c,K as g,P as f,Qa as h,T as s,U as t,V as e,Va as E,W as a,Xa as I,a as v,bb as C,da as R,ea as u,i as p,kb as w,ma as b,qa as i,ra as l,sa as x}from"./chunk-PLNBRGR3.js";import"./chunk-7CGTOI24.js";function O(d,o){if(d&1&&(t(0,"div",7),i(1),e()),d&2){let n=u();r(),l(n.error)}}function P(d,o){d&1&&(t(0,"div",8),i(1,"Loading reports..."),e())}function B(d,o){if(d&1&&(t(0,"div",9)(1,"section",10)(2,"h3",11),i(3,"Resident Statistics"),e(),t(4,"div",12)(5,"div",13)(6,"div",14),i(7,"Total Residents"),e(),t(8,"div",15),i(9),e()(),t(10,"div",16)(11,"div",14),i(12,"Male"),e(),t(13,"div",17),i(14),e()(),t(15,"div",16)(16,"div",14),i(17,"Female"),e(),t(18,"div",18),i(19),e()(),t(20,"div",16)(21,"div",14),i(22,"Other"),e(),t(23,"div",19),i(24),e()()(),t(25,"div",20)(26,"div",21),i(27,"Chart"),e(),t(28,"div",22)(29,"div",23),a(30,"span",24),i(31," Male"),e(),t(32,"div",23),a(33,"span",25),i(34," Female"),e(),t(35,"div",23),a(36,"span",26),i(37," Other"),e()()()(),t(38,"section",10)(39,"h3",11),i(40,"Document Request Statistics"),e(),t(41,"div",27)(42,"div",16)(43,"div",28),i(44,"Pending Requests"),e(),t(45,"div",29),i(46),e()(),t(47,"div",16)(48,"div",28),i(49,"Approved Requests"),e(),t(50,"div",30),i(51),e()(),t(52,"div",16)(53,"div",28),i(54,"Ready for Pickup"),e(),t(55,"div",31),i(56),e()()(),t(57,"div")(58,"h4",32),i(59,"Request Completion Rate"),e(),t(60,"div",33),a(61,"div",34),e(),t(62,"p",35),i(63),e()()(),t(64,"section",10)(65,"h3",11),i(66,"Document Type Breakdown"),e(),t(67,"div",36)(68,"table",37)(69,"thead",38)(70,"tr")(71,"th",39),i(72,"Document Type"),e(),t(73,"th",39),i(74,"Count"),e()()(),t(75,"tbody")(76,"tr",40)(77,"td",41),i(78,"Barangay Clearance"),e(),t(79,"td",41),i(80),e()(),t(81,"tr",40)(82,"td",41),i(83,"Certificate of Residency"),e(),t(84,"td",41),i(85),e()(),t(86,"tr",40)(87,"td",41),i(88,"Certificate of Indigency"),e(),t(89,"td",41),i(90),e()()()()()(),t(91,"div",42),i(92),y(93,"date"),e()()),d&2){let n=u();r(9),l((n.residentReport==null?null:n.residentReport.totalResidents)||0),r(5),l((n.residentReport==null?null:n.residentReport.totalMale)||0),r(5),l((n.residentReport==null?null:n.residentReport.totalFemale)||0),r(5),l((n.residentReport==null?null:n.residentReport.totalOther)||0),r(22),l((n.documentReport==null?null:n.documentReport.pendingRequests)||0),r(5),l((n.documentReport==null?null:n.documentReport.approvedRequests)||0),r(5),l((n.documentReport==null?null:n.documentReport.readyForPickup)||0),r(5),b("width",n.getCompletionPercentage(),"%"),r(2),x("",n.getCompletionPercentage(),"% of requests completed"),r(17),l((n.documentReport==null?null:n.documentReport.barangayClearance)||0),r(5),l((n.documentReport==null?null:n.documentReport.certificateOfResidency)||0),r(5),l((n.documentReport==null?null:n.documentReport.certificateOfIndigency)||0),r(2),x("Last updated: ",S(93,14,n.residentReport==null?null:n.residentReport.lastUpdated,"medium"))}}var k=class d{constructor(o,n){this.reportService=o;this.router=n}residentReport=null;documentReport=null;loading=!0;error="";destroy$=new v;ngOnInit(){this.loadReports()}goBack(){this.router.navigate(["/staff"])}loadReports(){this.loading=!0,this.reportService.getResidentStatistics().pipe(p(this.destroy$)).subscribe({next:o=>{this.residentReport=o},error:o=>{this.error="Failed to load resident statistics"}}),this.reportService.getDocumentStatistics().pipe(p(this.destroy$)).subscribe({next:o=>{this.documentReport=o,this.loading=!1},error:o=>{this.error="Failed to load document statistics",this.loading=!1}})}getCompletionPercentage(){if(!this.documentReport)return 0;let o=this.documentReport.totalDocumentsIssued+this.documentReport.pendingRequests;return o===0?0:Math.round(this.documentReport.totalDocumentsIssued/o*100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(n){return new(n||d)(c(w),c(C))};static \u0275cmp=g({type:d,selectors:[["app-reports"]],decls:9,vars:3,consts:[[1,"p-6"],[1,"flex","items-center","justify-between","mb-4"],["pButton","","pRipple","","type","button","icon","pi pi-arrow-left","aria-label","Back",1,"p-button-text","p-button-sm",3,"click"],[1,"text-xl","font-semibold"],["class","mb-4 p-3 bg-red-50 text-red-700 rounded",4,"ngIf"],["class","rounded bg-white p-6 shadow",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","text-red-700","rounded"],[1,"rounded","bg-white","p-6","shadow"],[1,"space-y-6"],[1,"bg-white","p-4","rounded","shadow"],[1,"text-lg","font-semibold","mb-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],[1,"p-4","bg-gradient-to-br","from-gray-50","to-gray-100","rounded","text-center"],[1,"text-xs","font-semibold","text-gray-500","uppercase"],[1,"text-2xl","font-bold","text-indigo-600"],[1,"p-4","bg-gray-50","rounded","text-center"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-2xl","font-bold","text-pink-600"],[1,"text-2xl","font-bold","text-gray-600"],[1,"flex","gap-4","items-center"],[1,"w-40","h-40","bg-gray-100","rounded-full","flex","items-center","justify-center"],[1,"space-y-2"],[1,"flex","items-center","gap-2"],[1,"w-4","h-4","bg-indigo-500","rounded"],[1,"w-4","h-4","bg-purple-600","rounded"],[1,"w-4","h-4","bg-gray-400","rounded"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4","mb-4"],[1,"text-xs","text-gray-500"],[1,"text-2xl","font-bold","text-yellow-500"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-teal-500"],[1,"font-semibold"],[1,"w-full","h-3","bg-gray-200","rounded","mt-2","overflow-hidden"],[1,"h-3","bg-gradient-to-r","from-indigo-500","to-purple-600"],[1,"mt-2","text-sm","text-gray-600"],[1,"overflow-x-auto"],[1,"w-full","table-auto"],[1,"bg-gray-100"],[1,"p-2","text-left"],[1,"border-b"],[1,"p-2"],[1,"text-center","text-sm","text-gray-500"]],template:function(n,m){n&1&&(t(0,"div",0)(1,"div",1)(2,"button",2),R("click",function(){return m.goBack()}),e(),t(3,"h2",3),i(4,"Reports & Analytics"),e(),a(5,"div"),e(),f(6,O,2,1,"div",4)(7,P,2,0,"div",5)(8,B,94,17,"div",6),e()),n&2&&(r(6),s("ngIf",m.error),r(),s("ngIf",m.loading),r(),s("ngIf",!m.loading&&!m.error))},dependencies:[I,h,D,_,E],styles:[".reports-legacy[_ngcontent-%COMP%]{--fallback: transparent}"]})};export{k as ReportsComponent};
