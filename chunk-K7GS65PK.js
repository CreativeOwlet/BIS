import{a as D,b as _}from"./chunk-6IJTW5S2.js";import{Aa as S,Ca as y,D as r,J as c,K as g,P as f,Qa as E,T as s,U as t,V as e,Va as h,W as a,Xa as I,a as v,bb as C,da as R,ea as u,i as p,kb as w,ma as b,qa as i,ra as o,sa as x}from"./chunk-SW3RDXTT.js";import"./chunk-7CGTOI24.js";function O(l,d){if(l&1&&(t(0,"div",7),i(1),e()),l&2){let n=u();r(),o(n.error)}}function q(l,d){l&1&&(t(0,"div",8),i(1,"Loading reports..."),e())}function P(l,d){if(l&1&&(t(0,"div",9)(1,"section",10)(2,"h3",11),i(3,"Resident Statistics"),e(),t(4,"div",12)(5,"div",13)(6,"div",14),i(7,"Total Residents"),e(),t(8,"div",15),i(9),e()(),t(10,"div",16)(11,"div",14),i(12,"Male"),e(),t(13,"div",17),i(14),e()(),t(15,"div",16)(16,"div",14),i(17,"Female"),e(),t(18,"div",18),i(19),e()(),t(20,"div",16)(21,"div",14),i(22,"Other"),e(),t(23,"div",19),i(24),e()()(),t(25,"div",20)(26,"div",21),i(27,"Chart"),e(),t(28,"div",22)(29,"div",23),a(30,"span",24),i(31," Male"),e(),t(32,"div",23),a(33,"span",25),i(34," Female"),e(),t(35,"div",23),a(36,"span",26),i(37," Other"),e()()()(),t(38,"section",10)(39,"h3",11),i(40,"Document Request Statistics"),e(),t(41,"div",12)(42,"div",27)(43,"div",14),i(44,"Total Issued"),e(),t(45,"div",15),i(46),e(),t(47,"div",28),i(48,"Completed + Ready"),e()(),t(49,"div",16)(50,"div",29),i(51,"Pending Requests"),e(),t(52,"div",30),i(53),e()(),t(54,"div",16)(55,"div",29),i(56,"Approved Requests"),e(),t(57,"div",31),i(58),e()(),t(59,"div",16)(60,"div",29),i(61,"Ready for Pickup"),e(),t(62,"div",32),i(63),e()()(),t(64,"div",33)(65,"div",16)(66,"div",29),i(67,"Completed"),e(),t(68,"div",17),i(69),e()(),t(70,"div",16)(71,"div",29),i(72,"Needs Revision"),e(),t(73,"div",34),i(74),e()(),t(75,"div",16)(76,"div",29),i(77,"Rejected"),e(),t(78,"div",35),i(79),e()()(),t(80,"div")(81,"h4",36),i(82,"Request Completion Rate"),e(),t(83,"div",37),a(84,"div",38),e(),t(85,"p",39),i(86),e()()(),t(87,"section",10)(88,"h3",11),i(89,"Document Type Breakdown (Issued Documents)"),e(),t(90,"div",40)(91,"table",41)(92,"thead",42)(93,"tr")(94,"th",43),i(95,"Document Type"),e(),t(96,"th",43),i(97,"Issued Count"),e()()(),t(98,"tbody")(99,"tr",44)(100,"td",45),i(101,"Barangay Clearance"),e(),t(102,"td",45),i(103),e()(),t(104,"tr",44)(105,"td",45),i(106,"Certificate of Residency"),e(),t(107,"td",45),i(108),e()(),t(109,"tr",44)(110,"td",45),i(111,"Certificate of Indigency"),e(),t(112,"td",45),i(113),e()()()()()(),t(114,"div",46),i(115),S(116,"date"),e()()),l&2){let n=u();r(9),o((n.residentReport==null?null:n.residentReport.totalResidents)||0),r(5),o((n.residentReport==null?null:n.residentReport.totalMale)||0),r(5),o((n.residentReport==null?null:n.residentReport.totalFemale)||0),r(5),o((n.residentReport==null?null:n.residentReport.totalOther)||0),r(22),o((n.documentReport==null?null:n.documentReport.totalDocumentsIssued)||0),r(7),o((n.documentReport==null?null:n.documentReport.pendingRequests)||0),r(5),o((n.documentReport==null?null:n.documentReport.approvedRequests)||0),r(5),o((n.documentReport==null?null:n.documentReport.readyForPickup)||0),r(6),o((n.documentReport==null?null:n.documentReport.completedRequests)||0),r(5),o((n.documentReport==null?null:n.documentReport.needsRevision)||0),r(5),o((n.documentReport==null?null:n.documentReport.rejectedRequests)||0),r(5),b("width",n.getCompletionPercentage(),"%"),r(2),x("",n.getCompletionPercentage(),"% of requests completed"),r(17),o((n.documentReport==null?null:n.documentReport.barangayClearance)||0),r(5),o((n.documentReport==null?null:n.documentReport.certificateOfResidency)||0),r(5),o((n.documentReport==null?null:n.documentReport.certificateOfIndigency)||0),r(2),x("Last updated: ",y(116,18,n.residentReport==null?null:n.residentReport.lastUpdated,"medium"))}}var k=class l{constructor(d,n){this.reportService=d;this.router=n}residentReport=null;documentReport=null;loading=!0;error="";destroy$=new v;ngOnInit(){this.loadReports()}goBack(){this.router.navigate(["/staff"])}loadReports(){this.loading=!0,this.reportService.getResidentStatistics().pipe(p(this.destroy$)).subscribe({next:d=>{this.residentReport=d},error:d=>{this.error="Failed to load resident statistics"}}),this.reportService.getDocumentStatistics().pipe(p(this.destroy$)).subscribe({next:d=>{this.documentReport=d,this.loading=!1},error:d=>{this.error="Failed to load document statistics",this.loading=!1}})}getCompletionPercentage(){if(!this.documentReport)return 0;let d=this.documentReport.totalDocumentsIssued+this.documentReport.pendingRequests;return d===0?0:Math.round(this.documentReport.totalDocumentsIssued/d*100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(n){return new(n||l)(c(w),c(C))};static \u0275cmp=g({type:l,selectors:[["app-reports"]],decls:9,vars:3,consts:[[1,"p-6"],[1,"flex","items-center","justify-between","mb-4"],["pButton","","pRipple","","type","button","icon","pi pi-arrow-left","aria-label","Back",1,"p-button-text","p-button-sm",3,"click"],[1,"text-xl","font-semibold"],["class","mb-4 p-3 bg-red-50 text-red-700 rounded",4,"ngIf"],["class","rounded bg-white p-6 shadow",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"mb-4","p-3","bg-red-50","text-red-700","rounded"],[1,"rounded","bg-white","p-6","shadow"],[1,"space-y-6"],[1,"bg-white","p-4","rounded","shadow"],[1,"text-lg","font-semibold","mb-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],[1,"p-4","bg-gradient-to-br","from-gray-50","to-gray-100","rounded","text-center"],[1,"text-xs","font-semibold","text-gray-500","uppercase"],[1,"text-2xl","font-bold","text-indigo-600"],[1,"p-4","bg-gray-50","rounded","text-center"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-2xl","font-bold","text-pink-600"],[1,"text-2xl","font-bold","text-gray-600"],[1,"flex","gap-4","items-center"],[1,"w-40","h-40","bg-gray-100","rounded-full","flex","items-center","justify-center"],[1,"space-y-2"],[1,"flex","items-center","gap-2"],[1,"w-4","h-4","bg-indigo-500","rounded"],[1,"w-4","h-4","bg-purple-600","rounded"],[1,"w-4","h-4","bg-gray-400","rounded"],[1,"p-4","bg-gradient-to-br","from-indigo-50","to-indigo-100","rounded","text-center"],[1,"text-xs","text-gray-400","mt-1"],[1,"text-xs","text-gray-500"],[1,"text-2xl","font-bold","text-yellow-500"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-teal-500"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-4","mb-4"],[1,"text-2xl","font-bold","text-orange-500"],[1,"text-2xl","font-bold","text-red-600"],[1,"font-semibold"],[1,"w-full","h-3","bg-gray-200","rounded","mt-2","overflow-hidden"],[1,"h-3","bg-gradient-to-r","from-indigo-500","to-purple-600"],[1,"mt-2","text-sm","text-gray-600"],[1,"overflow-x-auto"],[1,"w-full","table-auto"],[1,"bg-gray-100"],[1,"p-2","text-left"],[1,"border-b"],[1,"p-2"],[1,"text-center","text-sm","text-gray-500"]],template:function(n,m){n&1&&(t(0,"div",0)(1,"div",1)(2,"button",2),R("click",function(){return m.goBack()}),e(),t(3,"h2",3),i(4,"Reports & Analytics"),e(),a(5,"div"),e(),f(6,O,2,1,"div",4)(7,q,2,0,"div",5)(8,P,117,21,"div",6),e()),n&2&&(r(6),s("ngIf",m.error),r(),s("ngIf",m.loading),r(),s("ngIf",!m.loading&&!m.error))},dependencies:[I,E,_,D,h],styles:[".reports-legacy[_ngcontent-%COMP%]{--fallback: transparent}"]})};export{k as ReportsComponent};
