import{b as P,c as O,d as T,e as L,f as k,g as E,h as I,i as N,j as R,k as W,l as D}from"./chunk-QAMT5HRW.js";import{D as a,J as g,K as C,Ka as x,P as _,Qa as y,T as u,U as t,V as n,Xa as v,bb as S,da as f,ea as b,gb as w,qa as o,ra as M,sa as h,ua as p,va as c,wa as m}from"./chunk-PLNBRGR3.js";import"./chunk-7CGTOI24.js";function z(s,r){if(s&1&&(t(0,"div",16),o(1),n()),s&2){let l=b();a(),h(" ",l.error," ")}}var A=class s{constructor(r,l,e){this.authService=r;this.router=l;this.cdr=e}email="";password="";loading=!1;error="";userType="resident";ngOnInit(){}async login(){if(this.error="",this.loading=!0,!this.email||!this.password){this.error="Email and password are required",this.loading=!1,this.cdr.markForCheck();return}try{console.log(`Logging in as ${this.userType}...`),await this.authService.login(this.email,this.password,this.userType),console.log(`Successfully logged in as ${this.userType}`),this.userType==="staff"?this.router.navigate(["/staff/dashboard"]):this.router.navigate(["/resident/dashboard"])}catch(r){console.error("Login error:",r),r.code==="auth/user-not-found"?this.error="No account found with this email":r.code==="auth/wrong-password"?this.error="Incorrect password":r.code==="auth/invalid-email"?this.error="Invalid email address":this.error=r.message||"Login failed",this.loading=!1,this.cdr.markForCheck()}}goToSignup(){this.router.navigate(["/signup"])}static \u0275fac=function(l){return new(l||s)(g(w),g(S),g(x))};static \u0275cmp=C({type:s,selectors:[["app-login"]],decls:30,vars:7,consts:[[1,"login-container"],[1,"login-box"],["class","error-message",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Enter your email",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","placeholder","Enter your password",3,"ngModelChange","ngModel"],["for","userType"],["id","userType","name","userType",3,"ngModelChange","ngModel"],["value","resident"],["value","staff"],["type","submit",3,"disabled"],[1,"signup-link"],[3,"click"],[1,"error-message"]],template:function(l,e){l&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Barangay Information System"),n(),t(4,"h2"),o(5),n(),_(6,z,2,1,"div",2),t(7,"form",3),f("ngSubmit",function(){return e.login()}),t(8,"div",4)(9,"label",5),o(10,"Email:"),n(),t(11,"input",6),m("ngModelChange",function(i){return c(e.email,i)||(e.email=i),i}),n()(),t(12,"div",4)(13,"label",7),o(14,"Password:"),n(),t(15,"input",8),m("ngModelChange",function(i){return c(e.password,i)||(e.password=i),i}),n()(),t(16,"div",4)(17,"label",9),o(18,"Login As:"),n(),t(19,"select",10),m("ngModelChange",function(i){return c(e.userType,i)||(e.userType=i),i}),t(20,"option",11),o(21,"Resident"),n(),t(22,"option",12),o(23,"Staff"),n()()(),t(24,"button",13),o(25),n()(),t(26,"p",14),o(27," Don't have an account? "),t(28,"a",15),f("click",function(){return e.goToSignup()}),o(29,"Sign up here"),n()()()()),l&2&&(a(5),M(e.userType==="staff"?"Staff Login":"Resident Login"),a(),u("ngIf",e.error),a(5),p("ngModel",e.email),a(4),p("ngModel",e.password),a(4),p("ngModel",e.userType),a(5),u("disabled",e.loading),a(),h(" ",e.loading?"Logging in...":"Login"," "))},dependencies:[v,y,D,E,N,R,P,I,O,T,W,k,L],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.login-box[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:8px;box-shadow:0 10px 25px #0003;width:100%;max-width:400px}.login-box[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#667eea;text-align:center;margin-bottom:10px;font-size:24px}.login-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#666;text-align:center;margin-bottom:30px;font-size:18px;font-weight:400}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:12px;border-radius:4px;margin-bottom:20px;border:1px solid #f5c6cb}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#333;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 5px #667eea4d}button[_ngcontent-%COMP%]{padding:12px;background-color:#667eea;color:#fff;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#764ba2}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.signup-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px;color:#666}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;cursor:pointer;text-decoration:none;font-weight:500}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{A as LoginComponent};
